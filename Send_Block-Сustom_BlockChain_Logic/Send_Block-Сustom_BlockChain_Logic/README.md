# Власна реалізація блокчейну

Повнофункціональна реалізація блокчейну, побудована на ASP.NET Core MVC (.NET 8.0), яка демонструє основні концепції блокчейну, включаючи майнінг з доказом роботи (proof-of-work), цифрові підписи, валідацію транзакцій та консенсус між вузлами.

## Можливості

- **Симуляція багатовузлової мережі** - Три незалежні вузли (A, B, C), що підтримують окремі блокчейни
- **Майнінг з доказом роботи** - Налаштовувана складність (1-6) з хешуванням SHA-256
- **Цифрові підписи** - Шифрування RSA-2048 для гаманців, транзакцій та блоків
- **Управління транзакціями** - Створення, підпис та валідація транзакцій з перевіркою балансу
- **Трансляція блоків** - Поширення видобутих блоків між вузлами з перевіркою консенсусу
- **Винагороди за майнінг** - Майнери отримують винагороди (50 монет за замовчуванням) за видобуток блоків
- **Майнінг порожніх блоків** - Майнери можуть видобувати блоки навіть без очікуючих транзакцій
- **Інтерфейс в реальному часі** - Інтерактивний веб-інтерфейс для управління гаманцями, створення транзакцій та моніторингу блокчейну

## Як це працює

### Компоненти блокчейну

- **Гаманці**: Генеруються з парами ключів RSA-2048, адреси походять від SHA-256 хешу публічного ключа
- **Транзакції**: Підписуються відправником, валідуються через криптографічну перевірку підпису
- **Блоки**: Містять декілька транзакцій, видобуваються через proof-of-work, підписуються майнером
- **Майнінг**: Пошук nonce, який виробляє хеш з N провідними нулями (hex), де N = складність
- **Консенсус**: Блоки, що транслюються на інші вузли, повинні пройти валідацію перед прийняттям

### Архітектура

```
NodeRegistryService (Singleton)
├── Вузол A (BlockChainService)
│   ├── Блокчейн (Chain)
│   ├── Пул транзакцій (Mempool)
│   └── Гаманці
├── Вузол B (BlockChainService)
└── Вузол C (BlockChainService)
```

Кожен вузол підтримує свій власний стан. Блоки можуть бути видобуті на одному вузлі та транслюватися на інші для валідації та консенсусу.

## Початок роботи

### Передумови

- [.NET 8.0 SDK](https://dotnet.microsoft.com/download/dotnet/8.0) або вище

### Встановлення

1. Клонуйте або перейдіть до директорії проєкту:
```bash
cd Send_Block-Сustom_BlockChain_Logic
```

2. Відновіть залежності:
```bash
dotnet restore
```

### Запуск додатку

1. Зберіть проєкт:
```bash
dotnet build
```

2. Запустіть додаток:
```bash
dotnet run
```

3. Відкрийте браузер та перейдіть за адресою:
   - HTTPS: `https://localhost:5001`
   - HTTP: `http://localhost:5000`

Додаток запуститься з трьома вузлами (A, B, C), кожен з яких містить лише блок genesis.

## Керівництво користувача

### 1. Створення гаманців

**Швидке налаштування:**
- Натисніть "Demo Setup" для створення трьох попередньо налаштованих гаманців: Alice, Bob, Charlie

**Ручне налаштування:**
- Введіть ім'я гаманця та натисніть "Register Wallet"
- Система генерує нову пару RSA ключів та відображає адресу гаманця

### 2. Видобуток першого блоку

Оскільки спочатку немає транзакцій, вам потрібно видобути порожній блок, щоб заробити перші монети:

1. Виберіть гаманець майнера зі списку (наприклад, "Alice")
2. Натисніть "Mine Block"
3. Дочекайтеся завершення proof-of-work
4. Тепер Alice має 50 монет (винагорода за майнінг)

### 3. Створення транзакцій

Коли у вас є баланс:

1. Виберіть гаманець відправника зі списку "From Wallet"
2. Введіть адресу одержувача в поле "To Address"
3. Введіть суму для відправлення
4. Натисніть "Create Transaction"
5. Транзакція додається до mempool (очікуючі транзакції)

### 4. Майнінг транзакцій

1. Виберіть гаманець майнера
2. Натисніть "Mine Block"
3. Всі очікуючі транзакції включаються в новий блок
4. Майнер отримує винагороду за майнінг плюс комісії за транзакції (якщо реалізовано)

### 5. Трансляція блоків

Для симуляції багатовузлового консенсусу:

1. Видобудьте блок на Вузлі A
2. Натисніть "Broadcast Last Block"
3. Блок відправляється на Вузли B та C для валідації
4. Перевірте інші вузли, щоб побачити, чи прийняли вони блок

### 6. Перемикання між вузлами

Використовуйте випадаючий список вузлів вгорі для перегляду блокчейнів різних вузлів та перевірки консенсусу.

## Конфігурація

### Складність майнінгу

Налаштуйте складність (1-6) через панель налаштувань:
- **Складність 1**: Дуже швидко (~миттєво)
- **Складність 2-3**: Швидко (секунди)
- **Складність 4-5**: Середньо (десятки секунд)
- **Складність 6**: Повільно (хвилини)

Вища складність вимагає більше обчислювальної роботи для пошуку валідного nonce.

### Винагорода за майнінг

За замовчуванням: 50 монет за блок (жорстко закодовано в `BlockChainService.cs`)

Для зміни модифікуйте:
```csharp
public decimal MiningReward { get; set; } = 50m;
```

## Технічні деталі

### Криптографія

- **Хешування**: SHA-256 для хешів блоків та адрес гаманців
- **Підпис**: RSA-2048 з SHA-256 + PKCS1 padding
- **Proof-of-Work**: Хеш повинен починатися з N нулів у шістнадцятковому представленні

### Правила валідації

**Валідація транзакцій:**
- Підпис повинен бути валідним (окрім COINBASE транзакцій)
- Відправник повинен мати достатній баланс

**Валідація блоків:**
- Індекс блоку повинен дорівнювати поточній довжині ланцюга
- Попередній хеш повинен співпадати з хешем останнього блоку
- Обчислений хеш повинен співпадати зі збереженим хешем
- Хеш повинен задовольняти proof-of-work (провідні нулі)
- Підпис блоку повинен бути валідним
- Всі транзакції повинні бути валідними

### Збереження даних

**Важливо:** Всі дані зберігаються лише в пам'яті. Перезапуск додатку скидає всі вузли до стану genesis.

## Структура проєкту

```
Send_Block-Сustom_BlockChain_Logic/
├── Controllers/
│   ├── BlockChainController.cs    # Основні операції блокчейну
│   └── HomeController.cs           # Стандартний MVC контролер
├── Models/
│   ├── Block.cs                    # Структура блоку та логіка майнінгу
│   ├── Transaction.cs              # Підпис та валідація транзакцій
│   ├── Wallet.cs                   # Генерація RSA ключів та підпис
│   └── ErrorViewModel.cs           # Обробка помилок
├── Services/
│   ├── BlockChainService.cs        # Основна логіка блокчейну
│   └── NodeRegistryService.cs      # Управління багатьма вузлами
├── ViewModels/
│   └── BlockChainViewModel.cs      # Агрегація даних для UI
├── Views/
│   └── BlockChain/
│       └── Index.cshtml             # Головний UI
├── Program.cs                       # Точка входу додатку
└── CLAUDE.md                        # Документація для розробки
```

## Розробка

### Збірка

```bash
dotnet build
```

### Очищення артефактів збірки

```bash
dotnet clean
```

### Запуск у режимі Release

```bash
dotnet run --configuration Release
```

## Обмеження

- **Відсутність збереження**: Дані втрачаються при перезапуску додатку
- **Тільки в пам'яті**: Не підходить для використання в продакшені
- **Одна машина**: Симуляція багатовузлової мережі працює на одному сервері
- **Відсутність мережі**: Вузли комунікують через виклики методів, а не мережеві протоколи
- **Безпека**: Приватні ключі зберігаються в пам'яті без шифрування
- **Відсутність комісій**: Реалізовані лише винагороди за майнінг

## Навчальні цілі

Цей проєкт демонструє:
- Структури даних блокчейну
- Консенсус proof-of-work
- Перевірку цифрових підписів
- Валідацію транзакцій
- Багатовузловий консенсус
- Альтернативу UTXO (модель балансів на основі облікових записів)

## Ліцензія

Навчальний/демонстраційний проєкт.

## Автор

Власна реалізація блокчейну для вивчення основ блокчейну.
