# Halving - Мінімальна Реалізація Блокчейну

Функціональна реалізація блокчейну, створена на ASP.NET Core 8.0 MVC, яка демонструє основні концепції блокчейну, включаючи майнінг proof-of-work, автоматичне коригування складності, управління транзакціями та веб-оглядач блокчейну.

## Можливості

- **Майнінг Proof of Work** - Хеш повинен починатися з N нулів залежно від складності
- **Автоматичне Коригування Складності** - Динамічно налаштовує складність майнінгу на основі середнього часу блоку
- **Управління Транзакціями** - Створення та управління транзакціями з комісіями та примітками
- **Мемпул** - Черга транзакцій, що очікують на майнінг
- **Винагорода Coinbase** - Майнери отримують винагороду за успішний майнінг блоків
- **Відстеження Балансів** - Управління балансами рахунків в реальному часі
- **Перегляд Транзакцій** - Розширюваний вбудований перегляд всіх транзакцій у кожному блоці
- **Валідація Блокчейну** - Перевірка цілісності всього блокчейну
- **Веб-Оглядач** - Зручний інтерфейс для взаємодії з блокчейном

## Технологічний Стек

- **.NET 8.0**
- **ASP.NET Core MVC**
- **C# з nullable reference types**
- **Алгоритм хешування SHA256**
- **Razor Pages для UI**

## Вимоги

- [.NET 8.0 SDK](https://dotnet.microsoft.com/download/dotnet/8.0) або новіша версія

## Встановлення та Запуск

### 1. Клонуйте або перейдіть до репозиторію

```bash
cd /path/to/Halving
```

### 2. Зберіть проєкт

```bash
dotnet build
```

### 3. Запустіть додаток

```bash
dotnet run --project Halving/Halving.csproj
```

### 4. Доступ до додатку

Відкрийте браузер та перейдіть за адресою:
- **HTTP**: http://localhost:5298
- **HTTPS**: https://localhost:7125

## Як Використовувати

### Майнінг Блоків

1. Перейдіть на головну сторінку (Blockchain Explorer)
2. Введіть адресу майнера у формі "Mine New Block"
3. Натисніть **Mine Block**
4. Спостерігайте, як алгоритм proof-of-work знаходить дійсний хеш
5. Зверніть увагу на коригування складності після кількох блоків

### Додавання Транзакцій

1. Заповніть форму "Add Transaction":
   - From Address (відправник)
   - To Address (отримувач)
   - Amount (кількість монет для переказу)
   - Fee (необов'язкова комісія транзакції)
   - Note (необов'язковий опис)
2. Натисніть **Add to Mempool**
3. Транзакція буде включена в наступний намайнений блок

### Перегляд Транзакцій

1. На головній сторінці блокчейну кожен блок відображає резюме
2. Натисніть **Show Transactions ▼**, щоб розгорнути та переглянути всі транзакції
3. Coinbase транзакції (винагороди за майнінг) виділені жовтим кольором
4. Кожна транзакція показує: FromAddress, ToAddress, Amount, Fee та Note

### Перевірка Балансів

- Натисніть **Balances** у навігації, щоб побачити всі баланси рахунків
- Або використовуйте сторінку Balance для перевірки конкретної адреси

### Валідація Ланцюга

- Натисніть **Validate**, щоб перевірити цілісність блокчейну
- Система перевіряє:
  - Правильність хешів
  - Зв'язки попередніх хешів
  - Вимоги proof-of-work

## Конфігурація Блокчейну

Налаштування за замовчуванням (можна змінити в `BlockChainService.cs`):

- **Початкова Складність**: 2
- **Винагорода за Майнінг**: 50 монет
- **Цільовий Час Блоку**: 10 секунд
- **Вікно Коригування Складності**: 5 блоків
- **Діапазон Складності**: 1-10

## Автоматичне Коригування Складності

Блокчейн автоматично налаштовує складність майнінгу:

- **Занадто Швидко** (< 7 секунд в середньому): Складність збільшується
- **Занадто Повільно** (> 15 секунд в середньому): Складність зменшується
- Коригування відбувається після майнінгу кожного блоку
- Аналізує останні 5 блоків для визначення середнього часу майнінгу

## Структура Проєкту

```
Halving/
├── Halving/
│   ├── Controllers/
│   │   └── BlockchainController.cs    # Основні операції блокчейну
│   ├── Models/
│   │   ├── Block.cs                   # Структура блоку
│   │   └── Transaction.cs             # Структура транзакції
│   ├── Services/
│   │   └── BlockChainService.cs       # Основна логіка блокчейну
│   ├── Views/
│   │   └── Blockchain/
│   │       ├── Index.cshtml           # Головний оглядач
│   │       ├── Mempool.cshtml         # Транзакції в очікуванні
│   │       ├── Balances.cshtml        # Баланси рахунків
│   │       ├── Validate.cshtml        # Валідація ланцюга
│   │       └── Balance.cshtml         # Перевірка балансу
│   └── Program.cs                     # Точка входу додатку
└── README.md
```

## Ключові Концепції

### Структура Блоку
Кожен блок містить:
- Index (позиція в ланцюгу)
- Timestamp (мітка часу)
- Previous block's hash (хеш попереднього блоку)
- Current block's hash (хеш поточного блоку)
- Nonce (лічильник для proof-of-work)
- Difficulty level (рівень складності)
- List of transactions (список транзакцій)
- Mining duration (тривалість майнінгу)

### Proof of Work
Алгоритм майнінгу:
1. Бере дані блоку (індекс, мітка часу, попередній хеш, nonce, транзакції)
2. Обчислює SHA256 хеш
3. Перевіряє, чи починається хеш з потрібної кількості нулів
4. Якщо ні, збільшує nonce і пробує знову
5. Продовжує, поки не знайде дійсний хеш

### Потік Транзакцій
1. Користувач створює транзакцію → Додається до мемпулу
2. Майнер майнить новий блок → Транзакції з мемпулу включені
3. Блок додається до ланцюга → Баланси оновлені
4. Мемпул очищено → Складність скориговано

## Приклад Використання

```
1. Намайніть перший блок з адресою "Alice"
   → Alice отримує 50 монет (винагорода за майнінг)

2. Додайте транзакцію: Alice → Bob, 10 монет
   → Транзакція додана до мемпулу

3. Намайніть другий блок з адресою "Alice"
   → Alice отримує ще 50 монет
   → Транзакція Alice → Bob обробляється
   → Баланс Alice: 90 монет (50 + 50 - 10)
   → Баланс Bob: 10 монет

4. Перевірте сторінку балансів для підтвердження
```

## Розробка

### Запуск у режимі спостереження (авто-перезавантаження)

```bash
dotnet watch --project Halving/Halving.csproj
```

### Очистити артефакти збірки

```bash
dotnet clean
```

### Відновити залежності

```bash
dotnet restore
```

## Примітки

- Стан блокчейну зберігається в пам'яті (singleton сервіс)
- Дані втрачаються при перезапуску додатку
- Це мінімальна навчальна реалізація, не готова до продакшену
- Немає рівня персистентності (бази даних)
- Немає мережевого/P2P функціоналу
- Немає цифрових підписів для перевірки транзакцій

## Автор

Максим Баташан
